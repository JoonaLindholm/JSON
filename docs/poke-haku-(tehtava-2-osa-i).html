<!DOCTYPE html>
<!-- Tällä kerrotaan selaimelle, että sivu on suomeksi -->
<html lang="fi"> 
<head>
  <!-- Tällä kerrotaan, että merkit (ä, ö, å) näkyvät oikein -->
  <meta charset="UTF-8"> 
  <!-- Sivu skaalautuu mobiililla oikein -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <!-- Nimi joka näkyy selaimen välilehdessä -->
  <title>JSON harjoitus</title> 

  <!-- Bootstrap CSS, tämä tuo valmiit tyylit eli napit, paddingit yms -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap JS Bundle (sis. Popper), tämä hoitaa kaikki interaktiot kuten napit ja valikot -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Pieni oma tyylimuutos -->
  <style>
    /* Kun käytät linkkiä (#vastaus), selain skrollaa sen paikkaan niin että nav-bar ei peitä sisältöä */
    :target { scroll-margin-top: 90px; }
  </style>
</head>
  
<body class="bg-light text-dark"> <!-- Taustaväri on vaalea, teksti tummalla -->

  <!-- TÄMÄ ON YLÄVALIKKO (navbar) -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark rounded-5 mx-5 mt-4 mb-4" aria-label="Päävalikko">
    <div class="container">

      <!-- Hampurilaisnappi pienillä näytöillä -->
      <button class="navbar-toggler me-2" type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navigaatio"
              aria-controls="navigaatio"
              aria-expanded="false"
              aria-label="Valikon vaihto">
        <span class="navbar-toggler-icon"></span>
      </button>

    <!-- Collapse-valikko, joka aukeaa pienillä näytöillä -->
    <div class="collapse navbar-collapse" id="navigaatio">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Etusivu (Tehtävä 1 OSA 1)</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="toteutus.html">Tehtävä 1 OSA II</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Poke haku (Tehtävä 2 OSA I)</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="tehtava-2-osa-ii.html">Tehtävä 2 OSA II</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="tehtava-3.html">Tehtävä 3</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

 <!-- Pääsisältö -->
  <div class="p-5"> <!-- Padding tuo ilmaa reunoihin -->
    <!-- mb-3 tuo alareunaan ilmaa -->
    <h1 class="mb-3">Pokemon haku</h1> 

    <!-- Tekstikenttä, johon käyttäjä kirjoittaa Pokemonin nimen -->
    <!-- form-control ja mb-3 tuo hienoutta ja ilmaa alareunaan -->
    <input type="text"
           id="pokemonName"
           class="form-control mb-3" 
           placeholder="Kirjoita pokemonin nimi">

    <!-- Hae-nappi -->
    <button onclick="poke()" class="btn btn-primary mb-4">
      Hae
    </button>
    
    <h2 class="mb-2">Tässä joitain pokemonien nimiä valmiiksi:</h2>

    <!-- Lista valmiista Pokemoneista -->
    <ul class="mb-3">
      <li>Charmander</li>
      <li>Bulbasaur</li>
      <li>Eevee</li>
      <li>Pikachu</li>
      <li>Charizard</li>
      <li>Magikarp</li>
      <li>Gyarados</li>
    </ul>
    
    <!-- Tähän tulee Pokemonin nimi -->
    <div id="nimi"></div>

    <!-- Tähän tulee Pokemonin kuva -->
    <div id="kuva2"></div>

  </div>
  
  <main id="main">
    <section class="container pt-5 pb-5" id="vastaus"></section>
  </main>
  
  <script>

  // Tämä funktio pyörii kun käyttäjä painaa "Hae"-nappia
  function poke(){

    // Haetaan tekstikentästä se nimi mitä käyttäjä kirjoitti
    const pokeName = document
      // etsitään kenttä
      .getElementById("pokemonName")
      // otetaan sen sisältö
      .value
      // muutetaan pieniksi kirjaimiksi, koska API vaatii sen
      .toLowerCase();                

    // Haetaan tiedot internetistä PokeAPI:sta
    fetch(`https://pokeapi.co/api/v2/pokemon/${pokeName}`)

      // Kun palvelin vastaa
      .then(function(response){
        // Muutetaan JSON muotoon, jonka JS ymmärtää
        return response.json(); 
      })

      // Kun data on saatu
      .then(function(data){

        // Näytetään Pokemonin nimi
        document.getElementById("nimi").innerHTML =
          "<h2>" + data.name + "</h2>";

        // Näytetään Pokemonin kuva
        document.getElementById("kuva2").innerHTML =
          "<img src='" + data.sprites.front_default + "'>";

      })

      // Jos jotain menee pieleen (kirjoitusvirhe tms)
      .catch(function(){

        // Kerrotaan käyttäjälle, että Pokemonia ei löytynyt
        document.getElementById("nimi").innerHTML =
          "Pokemonia ei löytynyt";

        // Tyhjennetään kuva
        document.getElementById("kuva2").innerHTML = "";
      });
  }

  </script>
  
</body>
</html>
